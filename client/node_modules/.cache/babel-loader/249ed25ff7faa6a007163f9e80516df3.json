{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Lena/Documents/Programming/reactcalendarapp/old_client/src/components/UserReg.js\";\nimport React, { Component } from 'react';\nimport Textbox from './Textbox'; //import {addEvent, updateDaysLeft} from '../actions/actionCreators';\n\nimport store from '../store';\nimport { updateUser, loadEventsFromDB, flush } from '../actions/actionCreators';\nimport axios from 'axios';\n\nvar UserReg =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserReg, _Component);\n\n  function UserReg() {\n    _classCallCheck(this, UserReg);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UserReg).apply(this, arguments));\n  }\n\n  _createClass(UserReg, [{\n    key: \"fetchUserInfo\",\n    value: function fetchUserInfo(input) {\n      return axios.get(\"http://localhost:3001/getUserInfo/\".concat(input)).then(function (response) {\n        console.log(response.data);\n        return response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function () {\n      var _onSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(input) {\n        var user_data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"submitted \" + input);\n                _context.next = 3;\n                return this.fetchUserInfo(input);\n\n              case 3:\n                user_data = _context.sent;\n                console.log(\"sending to reducer: \" + user_data.name + user_data._id); // dispatch user and events to state\n\n                store.dispatch(updateUser(user_data.name, user_data._id));\n                console.log(user_data.events); //store.dispatch(flush())\n                //store.dispatch(loadEventsFromDB(user_data.events));\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onSubmit(_x) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      console.log(this.props.user);\n\n      if (!this.props.user) {\n        return React.createElement(\"div\", {\n          className: \"user-reg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"username-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, \"username\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(Textbox, {\n          class: \"username-input\",\n          onSubmit: function onSubmit(input) {\n            return _this.onSubmit(input);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"password-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, \"password\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(Textbox, {\n          class: \"password-input\",\n          onSubmit: function onSubmit(input) {\n            return _this.onSubmit(input);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"userid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, \"not logged in\"));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"user-reg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"username-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \"username\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }, React.createElement(Textbox, {\n          class: \"username-input\",\n          onSubmit: function onSubmit(input) {\n            return _this.onSubmit(input);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"password-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }, \"password\"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(Textbox, {\n          class: \"password-input\",\n          onSubmit: function onSubmit(input) {\n            return _this.onSubmit(input);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"userid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"logged in as \", this.props.user));\n      }\n    }\n  }]);\n\n  return UserReg;\n}(Component);\n\nexport default UserReg;","map":{"version":3,"sources":["/Users/Lena/Documents/Programming/reactcalendarapp/old_client/src/components/UserReg.js"],"names":["React","Component","Textbox","store","updateUser","loadEventsFromDB","flush","axios","UserReg","input","get","then","response","console","log","data","catch","error","fetchUserInfo","user_data","name","_id","dispatch","events","props","user","onSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Textbox from './Textbox';\n//import {addEvent, updateDaysLeft} from '../actions/actionCreators';\nimport store from '../store';\nimport {updateUser, loadEventsFromDB, flush} from '../actions/actionCreators';\nimport axios from 'axios';\n\n\n\nclass UserReg extends Component{\n\n    fetchUserInfo(input){\n        return axios.get(`http://localhost:3001/getUserInfo/${input}`)\n        .then(response =>{\n            console.log(response.data);\n            return response.data;\n        })\n        .catch(error => {\n            console.log(error);\n        });\n\n    }\n\n    async onSubmit(input){\n        console.log(\"submitted \"+input);\n        const user_data=await this.fetchUserInfo(input)\n        console.log(\"sending to reducer: \"+user_data.name+user_data._id);\n        \n        // dispatch user and events to state\n        store.dispatch(updateUser(user_data.name,user_data._id));\n        console.log(user_data.events);\n        //store.dispatch(flush())\n        //store.dispatch(loadEventsFromDB(user_data.events));\n   }\n\n    render(){\n        console.log(this.props.user);\n        if (!this.props.user){\n            return(\n            <div className=\"user-reg\">\n                <div className=\"username-text\">username</div>\n                <div><Textbox class=\"username-input\" onSubmit={input => this.onSubmit(input)}/></div>\n                <div className=\"password-text\">password</div>\n                <div><Textbox class=\"password-input\" onSubmit={input => this.onSubmit(input)}/></div>\n                <div className=\"userid\">not logged in</div>\n            </div>\n            );\n        }\n        else{\n            return(\n                <div className=\"user-reg\">\n                    <div className=\"username-text\">username</div>\n                    <div><Textbox class=\"username-input\" onSubmit={input => this.onSubmit(input)}/></div>\n                    <div className=\"password-text\">password</div>\n                    <div><Textbox class=\"password-input\" onSubmit={input => this.onSubmit(input)}/></div>\n                    <div className=\"userid\">logged in as {this.props.user}</div>\n                </div>\n            );\n            \n        }\n\n    }\n}\n\nexport default UserReg;"]},"metadata":{},"sourceType":"module"}